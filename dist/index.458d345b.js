const e=document.querySelector("canvas"),t=e.getContext("2d"),a={canvas:e,ctx:t,paramsWindow:document.getElementById("params")},i=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},n=function(e,t,a,i,n=0,l="right"){let u=e.x>t.x?e.x-t.x:t.x-e.x;u=0===u?1:u;let s,o,r=(e.x>t.x?e.y-t.y:t.y-e.y)/u,c=e.y-r*e.x;return Math.max(e.x,t.x)-Math.min(e.x,t.x)>Math.max(e.y,t.y)-Math.min(e.y,t.y)?(l=a.y>i.y?"right"===l?-1:"left"===l?1:0:"right"===l?1:"left"===l?-1:0,s=a.x+l*n,o=r*s+c):(l=a.x>i.x?"right"===l?1:"left"===l?-1:0:"right"===l?-1:"left"===l?1:0,o=a.y+l*n,s=(o-c)/r),{x:s,y:o}},l=function(e,t,a,l,u=params.smoothness.initial){u=Math.max(0,Math.min(u,1));let s={x:(e.x+t.x)/2,y:(e.y+t.y)/2},o={x:(t.x+a.x)/2,y:(t.y+a.y)/2},r={x:(s.x+o.x)/2,y:(s.y+o.y)/2},c=i(s,r),m=i(r,o);return{cpl:n(s,o,r,l,.552*c*u,"left"),cpr:n(s,o,r,l,.552*m*u,"right"),x:r.x,y:r.y}},u=function(e,t={pointsInterval:!1,pointsHeight:!1,circlesRotation:!1}){a.ctx.clearRect(0,0,e.resolution.value,e.resolution.value),a.ctx.lineWidth=e.strokeWidth.value,e.alphaBackground.value||(a.ctx.fillStyle="white",a.ctx.fillRect(0,0,a.canvas.width,a.canvas.height));const i=function(e){let t=e.iterations.value,a=1/Math.max(t-1,1),i=[];for(let n=0;n<t;n++){let t;t=e.tension.value<0?1-Math.pow(1-n*a,-1*e.tension.value):Math.pow(n*a,e.tension.value),i.push(Math.round(1e3*(e.smallestCircleScale.value+t*(e.biggestCircleScale.value-e.smallestCircleScale.value)))/2e3)}return i}(e),n=function(e){let t=[];for(let a=0;a<e.iterations.value;a++)t.push(e.pointsPerCircle.value);return t}(e);if(e.randomizePointsInterval.value&&(t.pointsInterval||0===e.pointsIntervalRandomizationSeed.value.length)){let t=[];for(let a=0;a<e.iterations.value;a++)t.push(Array.apply(null,Array(n[a])).map((()=>-.5+Math.random())));e.pointsIntervalRandomizationSeed.value=t}i.forEach(((t,i)=>{let u=function(e,t,i,n){let u=360/t,s=(n.biggestCircleScale.value/2-e)*n.distanceFromCenter.value,o=a.canvas.width/2+s*Math.cos(n.originRotate.value*Math.PI/180),r=a.canvas.height/2+s*Math.sin(n.originRotate.value*Math.PI/180),c=[],m=[];for(let a=0;a<t;a++){let t=n.randomizePointsInterval.value?u*i[a]*n.pointsIntervalRandomizationFactor.value:0,l=o+e*Math.cos((a*u+t)*Math.PI/180),s=r+e*Math.sin((a*u+t)*Math.PI/180);c.push({x:l,y:s})}return c.forEach(((e,t)=>{let a=t>0?c[t-1]:c[c.length-1],i=t<c.length-1?c[t+1]:c[0];m.push(l(a,e,i,{x:o,y:r},n.smoothness.value))})),m}(t,n[i],e.pointsIntervalRandomizationSeed.value[i],e);a.ctx.beginPath(),u.forEach(((t,i)=>{if(0===i&&a.ctx.moveTo(t.x,t.y),0===e.smoothness.value)a.ctx.lineTo(t.x,t.y);else if(i>0){let e=u[i-1].cpr,n=t.cpl;a.ctx.bezierCurveTo(e.x,e.y,n.x,n.y,t.x,t.y)}})),e.smoothness.value>0?a.ctx.bezierCurveTo(u[u.length-1].cpr.x,u[u.length-1].cpr.y,u[0].cpl.x,u[0].cpl.y,u[0].x,u[0].y):a.ctx.closePath(),a.ctx.stroke()}))};let s;s={resolution:{group:"downloadImage",label:"resolution",type:"number",initial:window.innerHeight,min:1,max:6e3,get value(){return this.computedValue},set value(e){let t=Math.max(Math.min(e,this.max),this.min);this.computedValue=this.inputValue=a.canvas.width=a.canvas.height=t,null!==s.biggestCircleScale.inputValue&&(s.biggestCircleScale.value=s.biggestCircleScale.inputValue),null!==s.strokeWidth.inputValue&&(s.strokeWidth.value=s.strokeWidth.inputValue)}},biggestCircleScale:{type:"range",initial:.9,min:0,max:2,step:.01,get value(){return this.computedValue},set value(e){let t=this.inputValue=Math.max(Math.min(e,this.max),this.min);this.computedValue=t*s.resolution.value,null!==s.smallestCircleScale.inputValue&&(s.smallestCircleScale.value=s.smallestCircleScale.inputValue)}},smallestCircleScale:{type:"range",initial:.4,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){let t=this.inputValue=Math.max(Math.min(e,this.max),this.min);this.computedValue=t*s.biggestCircleScale.value}},originRotate:{group:"origin",type:"range",label:"rotate",initial:60,min:0,max:360,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},distanceFromCenter:{group:"origin",type:"range",label:"distanceFromCenter",initial:1,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},iterations:{type:"range",initial:25,min:1,max:200,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},tension:{type:"range",initial:.5,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){let t=Math.max(Math.min(e,this.max),this.min);this.inputValue=t,t=t<.5?-1*(1+(.5-t)/.5*4):1+(t-.5)/.5*4,this.computedValue=t}},pointsPerCircle:{type:"range",initial:20,min:4,max:80,step:1,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},smoothness:{type:"range",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},randomizePointsInterval:{group:"randomizePointsInterval",type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=JSON.parse(e)}},pointsIntervalRandomizationFactor:{group:"randomizePointsInterval",type:"range",label:"randomizationFactor",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},pointsIntervalRandomizationSeed:{group:"randomizePointsInterval",type:"button",text:"seed",initial:[],get value(){return this.computedValue},set value(e){this.computedValue=e},onClick:function(){requestAnimationFrame((()=>{u(s,{pointsInterval:!0})}))}},circlesRotationVariationType:{group:"circlesRotationVariation",label:"type",type:"select",listOfValues:[{value:!1,text:"none",selected:!0},{value:"randomization",text:"randomization"},{value:"progression",text:"progression"}],initial:!1,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=JSON.parse(e)}},circlesRotationVariationFactor:{group:"circlesRotationVariation",type:"range",label:"variationFactor",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},circlesRotationRandomizationSeed:{group:"circlesRotationVariation",type:"button",text:"seed",initial:!1,get value(){return this.computedValue},set value(e){this.computedValue=e},onClick:function(){requestAnimationFrame((()=>{u(s,{circlesRotation:!0})}))}},strokeWidth:{type:"number",initial:1,min:2,max:100,step:.01,get value(){return this.computedValue},set value(e){let t=this.inputValue=Math.max(Math.min(e,this.max),this.min);this.computedValue=s.resolution.value*t/2048}},alphaBackground:{type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=JSON.parse(e)}},downloadImage:{group:"downloadImage",type:"button",text:"download",onClick:function(){a.canvas.toBlob((e=>{let t=document.createElement("a");t.href=URL.createObjectURL(e),t.setAttribute("download",""),t.click(),URL.revokeObjectURL(t.href)}),"image/png")}}};const o=function(e){let t=[0],a="";return Array.from(e).forEach(((e,a)=>{e.toUpperCase()===e&&t.push(a)})),t.forEach(((i,n)=>{a+="<span>"+e.slice(i,t[n+1])+"</span>"})),a},r=function(e){let t=e.target.getAttribute("data-var"),a=e.target.value;s[t].value=a,requestAnimationFrame((()=>{u(s,["pointsPerCircle","iterations"].includes(t)?{pointsInterval:!0,pointsHeight:!0}:{pointsInterval:!1,pointsHeight:!1})}))};!function(e){for(let t in e){let i,n,l=e[t];if(l.hasOwnProperty("initial")&&(l.value=l.initial),l.hasOwnProperty("group")){let e=document.querySelector("."+l.group);if(e)i=e;else{i=document.createElement("fieldset"),i.classList.add(l.group);let e=document.createElement("legend");e.innerHTML=o(l.group),i.append(e)}}else{i=document.createElement("fieldset");let e=document.createElement("legend");e.innerHTML=o(t),i.append(e)}if("button"===l.type?(n=document.createElement("button"),n.innerHTML=l.text,n.addEventListener("click",l.onClick)):"select"===l.type?(n=document.createElement("select"),l.listOfValues.forEach((e=>{n.innerHTML+=`<option ${e.hasOwnProperty("selected")&&e.selected?"selected":""} value="${e.value}">${e.text}</option>`})),n.addEventListener("input",r),n.setAttribute("data-var",t)):(n=document.createElement("input"),n.type=l.type,l.hasOwnProperty("step")&&(n.step=l.step),l.hasOwnProperty("min")&&(n.min=l.min),l.hasOwnProperty("max")&&(n.max=l.max),n.value=l.inputValue,n.addEventListener("input",r),n.setAttribute("data-var",t)),l.hasOwnProperty("label")){let e=document.createElement("fieldset"),t=document.createElement("legend");t.innerHTML=o(l.label),e.append(t),e.append(n),n=e}i.append(n),a.paramsWindow.append(i)}}(s),requestAnimationFrame((()=>{u(s)}));
//# sourceMappingURL=index.458d345b.js.map
