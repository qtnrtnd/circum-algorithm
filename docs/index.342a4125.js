const t=document.querySelector("canvas"),e=t.getContext("2d"),a={canvas:t,ctx:e,paramsWindow:document.getElementById("params")},i=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},n=function(t,e,a,i,n=0,l="right"){let o=t.x>e.x?t.x-e.x:e.x-t.x;o=0===o?1:o;let r,u,s=(t.x>e.x?t.y-e.y:e.y-t.y)/o,c=t.y-s*t.x;return Math.max(t.x,e.x)-Math.min(t.x,e.x)>Math.max(t.y,e.y)-Math.min(t.y,e.y)?(l=a.y>i.y?"right"===l?-1:"left"===l?1:0:"right"===l?1:"left"===l?-1:0,r=a.x+l*n,u=s*r+c):(l=a.x>i.x?"right"===l?1:"left"===l?-1:0:"right"===l?-1:"left"===l?1:0,u=a.y+l*n,r=(u-c)/s),{x:r,y:u}},l=function(t,e,a,l,o=params.smoothness.initial){o=Math.max(0,Math.min(o,1));let r={x:(t.x+e.x)/2,y:(t.y+e.y)/2},u={x:(e.x+a.x)/2,y:(e.y+a.y)/2},s={x:(r.x+u.x)/2,y:(r.y+u.y)/2},c=i(r,s),m=i(s,u);return{cpl:n(r,u,s,l,.552*c*o,"left"),cpr:n(r,u,s,l,.552*m*o,"right"),x:s.x,y:s.y}},o=function(t,e={pointsInterval:!1,pointsHeight:!1,circlesRotation:!1}){a.ctx.clearRect(0,0,t.resolution.value,t.resolution.value),a.ctx.lineWidth=t.strokeWidth.value,t.alphaBackground.value||(a.ctx.fillStyle="white",a.ctx.fillRect(0,0,a.canvas.width,a.canvas.height));const i=function(t){let e=[];for(let a=0;a<t.iterations.value;a++)e.push(t.pointsPerCircle.value);return e}(t),n=function(t){let e=t.iterations.value,a=1/Math.max(e-1,1),i=[];for(let n=0;n<e;n++){let e;e=t.tension.value<0?1-Math.pow(1-n*a,-1*t.tension.value):Math.pow(n*a,t.tension.value),i.push(Math.round(1e3*(t.smallestCircleScale.value+e*(t.biggestCircleScale.value-t.smallestCircleScale.value)))/2e3)}return i}(t);if(t.randomizePointsInterval.value&&(e.pointsInterval||!t.pointsIntervalRandomizationSeed.value)){let e=[];for(let a=0;a<t.iterations.value;a++)e.push(Array.apply(null,Array(i[a])).map((()=>-.5+Math.random())));t.pointsIntervalRandomizationSeed.value=e}if(t.circlesRotationVariationType.value&&(e.circlesRotation||!t.circlesRotationVariationSeed.value)){let e=[];if("randomization"===t.circlesRotationVariationType.value)for(let a=0;a<t.iterations.value;a++)e.push(Math.random());else if("progression"===t.circlesRotationVariationType.value)for(let a=0;a<t.iterations.value;a++)e.push(Math.round(a/(t.iterations.value-1)*1e3)/1e3);t.circlesRotationVariationSeed.value=e}n.forEach(((e,n)=>{let o=t.pointsIntervalRandomizationSeed.value;Array.isArray(o)&&(o=o[n]);let r=t.circlesRotationVariationSeed.value;Array.isArray(r)&&(r=r[n]);let u=function(t,e,i,n,o){let r=360/e,u=(o.biggestCircleScale.value/2-t)*o.distanceFromCenter.value,s=a.canvas.width/2+u*Math.cos(o.originRotate.value*Math.PI/180),c=a.canvas.height/2+u*Math.sin(o.originRotate.value*Math.PI/180),m=[],p=[];for(let a=0;a<e;a++){let e=(o.randomizePointsInterval.value?r*(i?i[a]:0)*o.pointsIntervalRandomizationFactor.value:0)+(o.circlesRotationVariationType.value?("randomization"===o.circlesRotationVariationType.value?r:360)*(n||0)*o.circlesRotationVariationFactor.value:0),l=s+t*Math.cos((a*r+e)*Math.PI/180),u=c+t*Math.sin((a*r+e)*Math.PI/180);m.push({x:l,y:u})}return m.forEach(((t,e)=>{let a=e>0?m[e-1]:m[m.length-1],i=e<m.length-1?m[e+1]:m[0];p.push(l(a,t,i,{x:s,y:c},o.smoothness.value))})),p}(e,i[n],o,r,t);a.ctx.beginPath(),u.forEach(((e,i)=>{if(0===i&&a.ctx.moveTo(e.x,e.y),0===t.smoothness.value)a.ctx.lineTo(e.x,e.y);else if(i>0){let t=u[i-1].cpr,n=e.cpl;a.ctx.bezierCurveTo(t.x,t.y,n.x,n.y,e.x,e.y)}})),t.smoothness.value>0?a.ctx.bezierCurveTo(u[u.length-1].cpr.x,u[u.length-1].cpr.y,u[0].cpl.x,u[0].cpl.y,u[0].x,u[0].y):a.ctx.closePath(),a.ctx.stroke()}))};let r;const u=function(t){let e=r[t];e.inputValue&&(e.value=e.inputValue)};r={resolution:{group:"downloadImage",label:"resolution",type:"number",initial:window.innerHeight,min:1,max:6e3,get value(){return this.computedValue},set value(t){let e=Math.max(Math.min(t,this.max),this.min);this.computedValue=this.inputValue=a.canvas.width=a.canvas.height=e,u("biggestCircleScale"),u("strokeWidth")}},biggestCircleScale:{type:"range",initial:.9,min:0,max:2,step:.01,get value(){return this.computedValue},set value(t){let e=this.inputValue=Math.max(Math.min(t,this.max),this.min);this.computedValue=e*r.resolution.value,u("smallestCircleScale")}},smallestCircleScale:{type:"range",initial:.4,min:0,max:1,step:.01,get value(){return this.computedValue},set value(t){let e=this.inputValue=Math.max(Math.min(t,this.max),this.min);this.computedValue=e*r.biggestCircleScale.value}},originRotate:{group:"origin",type:"range",label:"rotate",initial:60,min:0,max:360,step:.01,get value(){return this.computedValue},set value(t){this.computedValue=this.inputValue=Math.max(Math.min(t,this.max),this.min)}},distanceFromCenter:{group:"origin",type:"range",label:"distanceFromCenter",initial:1,min:0,max:1,step:.01,get value(){return this.computedValue},set value(t){this.computedValue=this.inputValue=Math.max(Math.min(t,this.max),this.min)}},iterations:{type:"range",initial:25,min:1,max:200,get value(){return this.computedValue},set value(t){this.computedValue=this.inputValue=Math.max(Math.min(t,this.max),this.min)}},tension:{type:"range",initial:.5,min:0,max:1,step:.01,get value(){return this.computedValue},set value(t){let e=Math.max(Math.min(t,this.max),this.min);this.inputValue=e,e=e<.5?-1*(1+(.5-e)/.5*4):1+(e-.5)/.5*4,this.computedValue=e}},pointsPerCircle:{type:"range",initial:20,min:4,max:80,step:1,get value(){return this.computedValue},set value(t){this.computedValue=this.inputValue=Math.max(Math.min(t,this.max),this.min)}},smoothness:{type:"range",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(t){this.computedValue=this.inputValue=Math.max(Math.min(t,this.max),this.min)}},randomizePointsInterval:{group:"randomizePointsInterval",type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1,get value(){return this.computedValue},set value(t){let e;try{e=JSON.parse(t)}catch{e=t}this.computedValue=this.inputValue=e}},pointsIntervalRandomizationFactor:{group:"randomizePointsInterval",type:"range",label:"randomizationFactor",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(t){this.computedValue=this.inputValue=Math.max(Math.min(t,this.max),this.min)}},pointsIntervalRandomizationSeed:{group:"randomizePointsInterval",type:"button",text:"seed",initial:!1,get value(){return this.computedValue},set value(t){this.computedValue=t},onClick:function(){requestAnimationFrame((()=>{o(r,{pointsInterval:!0})}))}},circlesRotationVariationType:{group:"circlesRotationVariation",label:"type",type:"select",listOfValues:[{value:!1,text:"none",selected:!0},{value:"randomization",text:"randomization"},{value:"progression",text:"progression"}],initial:!1,get value(){return this.computedValue},set value(t){let e;try{e=JSON.parse(t)}catch{e=t}this.computedValue=this.inputValue=e,e&&requestAnimationFrame((()=>{o(r,{circlesRotation:!0})}))}},circlesRotationVariationFactor:{group:"circlesRotationVariation",type:"range",label:"variationFactor",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(t){this.computedValue=this.inputValue=Math.max(Math.min(t,this.max),this.min)}},circlesRotationVariationSeed:{group:"circlesRotationVariation",type:"button",text:"seed",initial:!1,get value(){return this.computedValue},set value(t){this.computedValue=t},onClick:function(){requestAnimationFrame((()=>{o(r,{circlesRotation:!0})}))}},strokeWidth:{type:"number",initial:1,min:2,max:100,step:.01,get value(){return this.computedValue},set value(t){let e=this.inputValue=Math.max(Math.min(t,this.max),this.min);this.computedValue=r.resolution.value*e/2048}},alphaBackground:{type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1,get value(){return this.computedValue},set value(t){let e;try{e=JSON.parse(t)}catch{e=t}this.computedValue=this.inputValue=e}},downloadImage:{group:"downloadImage",type:"button",text:"download",onClick:function(){a.canvas.toBlob((t=>{let e=document.createElement("a");e.href=URL.createObjectURL(t),e.setAttribute("download",""),e.click(),URL.revokeObjectURL(e.href)}),"image/png")}}};const s=function(t){let e=[0],a="";return Array.from(t).forEach(((t,a)=>{t.toUpperCase()===t&&e.push(a)})),e.forEach(((i,n)=>{a+="<span>"+t.slice(i,e[n+1])+"</span>"})),a},c=function(t){let e=t.target.getAttribute("data-var"),a=t.target.value;r[e].value=a,requestAnimationFrame((()=>{let t;"pointsPerCircle"===e?t={pointsInterval:!0,pointsHeight:!0}:"iterations"===e&&(t={pointsInterval:!0,pointsHeight:!0,circlesRotation:!0}),o(r,t)}))};!function(t){for(let e in t){let i,n,l=t[e];if(l.hasOwnProperty("initial")&&(l.value=l.initial),l.hasOwnProperty("group")){let t=document.querySelector("."+l.group);if(t)i=t;else{i=document.createElement("fieldset"),i.classList.add(l.group);let t=document.createElement("legend");t.innerHTML=s(l.group),i.append(t)}}else{i=document.createElement("fieldset");let t=document.createElement("legend");t.innerHTML=s(e),i.append(t)}if("button"===l.type?(n=document.createElement("button"),n.innerHTML=l.text,n.addEventListener("click",l.onClick)):"select"===l.type?(n=document.createElement("select"),l.listOfValues.forEach((t=>{n.innerHTML+=`<option ${t.hasOwnProperty("selected")&&t.selected?"selected":""} value="${t.value}">${t.text}</option>`})),n.addEventListener("input",c),n.setAttribute("data-var",e)):(n=document.createElement("input"),n.type=l.type,l.hasOwnProperty("step")&&(n.step=l.step),l.hasOwnProperty("min")&&(n.min=l.min),l.hasOwnProperty("max")&&(n.max=l.max),n.value=l.inputValue,n.addEventListener("input",c),n.setAttribute("data-var",e)),l.hasOwnProperty("label")){let t=document.createElement("fieldset"),e=document.createElement("legend");e.innerHTML=s(l.label),t.append(e),t.append(n),n=t}i.append(n),a.paramsWindow.append(i)}}(r),requestAnimationFrame((()=>{o(r)}));
//# sourceMappingURL=index.342a4125.js.map
