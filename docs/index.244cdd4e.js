const e=document.querySelector("canvas"),t=e.getContext("2d"),a={canvas:e,ctx:t,paramsWindow:document.getElementById("params")},i=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},n=function(e,t,a,i,n){let o;return o=t<0?1-Math.pow(1-e*a,-1*t):Math.pow(e*a,t),Math.round(1e3*(i+o*(n-i)))/1e3},o=function(e,t,a,i=0,n=!1){let o,l,r=Math.max(e.x>t.x?e.x-t.x:t.x-e.x,1),s=(e.x>t.x?e.y-t.y:t.y-e.y)/r,u=e.y-s*e.x;return n?(l=a.y+i,o=(l-u)/s):(o=a.x+i,l=s*o+u),{x:o,y:l}},l=function(e,t,a,n=params.smoothness.initial){let l,r,s={x:(e.x+t.x)/2,y:(e.y+t.y)/2},u={x:(t.x+a.x)/2,y:(t.y+a.y)/2},p={x:(s.x+u.x)/2,y:(s.y+u.y)/2},c=i(s,p),d=i(p,u),m=Math.max(s.x,p.x)-Math.min(s.x,p.x)>=Math.max(s.y,p.y)-Math.min(s.y,p.y),v=Math.max(u.x,p.x)-Math.min(u.x,p.x)>=Math.max(u.y,p.y)-Math.min(u.y,p.y);return l=m?s.x<p.x?1:-1:s.y<p.y?1:-1,r=v?u.x>p.x?1:-1:u.y>p.y?1:-1,{cpl:o(s,u,p,-l*c*.552*n,!m),cpr:o(s,u,p,r*d*.552*n,!v),x:p.x,y:p.y}},r=function(e,t={pointsInterval:!1,pointsHeight:!1,circlesRotation:!1}){a.ctx.clearRect(0,0,e.resolution.value,e.resolution.value);const i=function(e){let t=e.iterations.value,a=1/Math.max(t-1,1),i=[];for(let o=0;o<t;o++){let t=n(o,e.circleSpacingEase.value,a,e.smallestCircleScale.value/2,e.biggestCircleScale.value/2);"out"===e.clipCircles.value?i.unshift(t):i.push(t)}return i}(e),o=function(e,t){let a=[];const i=e.biggestCircleScale.value/2,n=e.pointsPerCircle.value;for(let o=0;o<t.length;o++){let l;l=e.adaptativePointsPerCircle.value?Math.floor(e.pointsPerCircle.min+t[o]/i*(n-e.pointsPerCircle.min)):n,a.push(l)}return a}(e,i);if(t.pointsInterval||e.randomizePointsInterval.value&&!e.pointsIntervalRandomizationSeed.value){let t=[];for(let a=0;a<e.iterations.value;a++)t.push(Array.apply(null,Array(o[a])).map((()=>2*Math.random()-1)));e.pointsIntervalRandomizationSeed.setValue(t)}if(t.pointsHeight||e.randomizePointsHeight.value&&!e.pointsHeightRandomizationSeed.value){let t=[];for(let a=0;a<e.iterations.value;a++)t.push(Array.apply(null,Array(o[a])).map((()=>2*Math.random()-1)));e.pointsHeightRandomizationSeed.setValue(t)}if(t.circlesRotation||"randomization"===e.circlesRotationVariationType.value&&!e.circlesRotationRandomizationSeed.value){let t=[];for(let a=0;a<e.iterations.value;a++)t.push(Math.random());e.circlesRotationRandomizationSeed.setValue(t)}i.forEach(((t,i)=>{let r=e.strokeWidth.value,s=Math.max(n(i,e.strokeWidthEase.value,1/(e.iterations.value-1),e.strokeWidthMinFactor.value,e.strokeWidthMaxFactor.value),.001);e.linkStrokeWidthToEase.value&&(r*=s),a.ctx.lineWidth=r;let u=function(e,t,i,o,r,s,u){u.adaptativePointsPerCircle.value&&t!==i.length&&(t=i.length);let p=360/t,c=1/u.iterations.value,d=(u.biggestCircleScale.value/2-e)*u.distanceFromCenter.value,m=a.canvas.width/2+d*Math.cos(u.originRotate.value*Math.PI/180),v=a.canvas.height/2+d*Math.sin(u.originRotate.value*Math.PI/180),h=[],g=[],y=1,x=1,f=r||0;"progression"===u.circlesRotationVariationType.value&&("out"===u.clipCircles.value&&(s=u.iterations.value-1-s),f=Math.round(s/(u.iterations.value-1)*100)/100),u.linkPointsIntervalRandomizationFactorToEase.value&&(y=n(s,u.pointsIntervalRandomizationEase.value,c,u.pointsIntervalRandomizationMinFactor.value,u.pointsIntervalRandomizationMaxFactor.value)),u.linkPointsHeightRandomizationFactorToEase.value&&(x=n(s,u.pointsHeightRandomizationEase.value,c,u.pointsHeightRandomizationMinFactor.value,u.pointsHeightRandomizationMaxFactor.value));for(let a=0;a<t;a++){let t=(u.randomizePointsInterval.value?p/2*(i?i[a]:0)*u.pointsIntervalRandomizationFactor.value*y:0)+(u.circlesRotationVariationType.value?360*f*u.circlesRotationVariationFactor.value:0),n=u.randomizePointsHeight.value?(o?o[a]:0)*e*u.pointsHeightRandomizationFactor.value*x:0,l=m+(e+n)*Math.cos((a*p+t)*Math.PI/180),r=v+(e+n)*Math.sin((a*p+t)*Math.PI/180);h.push({x:l,y:r,angle:a*p})}return h.forEach(((e,t)=>{let a=t>0?h[t-1]:h[h.length-1],i=t<h.length-1?h[t+1]:h[0];g.push(l(a,e,i,u.smoothness.value))})),g}(t,o[i],e.pointsIntervalRandomizationSeed.value[i],e.pointsHeightRandomizationSeed.value[i],e.circlesRotationRandomizationSeed.value[i],i,e),p=new Path2D;u.forEach(((t,a)=>{if(0===a&&p.moveTo(t.x,t.y),0===e.smoothness.value)p.lineTo(t.x,t.y);else if(a>0){let e=u[a-1].cpr,i=t.cpl;p.bezierCurveTo(e.x,e.y,i.x,i.y,t.x,t.y)}})),e.smoothness.value>0?p.bezierCurveTo(u[u.length-1].cpr.x,u[u.length-1].cpr.y,u[0].cpl.x,u[0].cpl.y,u[0].x,u[0].y):p.closePath(),"in"===e.clipCircles.value?(a.ctx.globalCompositeOperation="destination-in",a.ctx.fill(p),a.ctx.globalCompositeOperation="source-over"):"out"===e.clipCircles.value&&(a.ctx.globalCompositeOperation="destination-out",a.ctx.fill(p),a.ctx.globalCompositeOperation="source-over"),a.ctx.stroke(p)})),e.alphaBackground.value||(a.ctx.globalCompositeOperation="destination-over",a.ctx.fillStyle="white",a.ctx.fillRect(0,0,a.canvas.width,a.canvas.height),a.ctx.globalCompositeOperation="source-over")};let s;s={resolution:{group:"downloadImage",label:"resolution",type:"number",initial:window.innerHeight,min:1,max:6e3,influences:["biggestCircleScale","strokeWidth"],onUpdate:function(e){a.canvas.width=a.canvas.height=e}},biggestCircleScale:{type:"range",initial:.75,min:0,max:2,step:.001,stepValues:[.25,1/3,.5,2/3,.75,1],influences:["smallestCircleScale"],onUpdate:function(e){return e*s.resolution.value}},smallestCircleScale:{type:"range",initial:.4,min:0,max:1,step:.001,stepValues:[.25,1/3,.5,2/3,.75],onUpdate:function(e){return e*s.biggestCircleScale.value}},originRotate:{group:"origin",type:"range",label:"rotate",initial:60,min:0,max:360,step:.001,stepValues:[45,90,135,180,225,270,315]},distanceFromCenter:{group:"origin",type:"range",label:"distanceFromCenter",initial:1,min:0,max:1,step:.001},iterations:{type:"number",initial:20,min:1,step:1},circleSpacingEase:{group:"circleSpacing",label:"ease",type:"range",initial:.5,min:0,max:1,step:.001,stepValues:[.5],onUpdate:function(e){let t;return t=e=e<.5?-1*(1+(.5-e)/.5*9):1+(e-.5)/.5*9,t}},pointsPerCircle:{group:"pointsPerCircle",type:"number",initial:20,min:4,step:1},adaptativePointsPerCircle:{group:"pointsPerCircle",label:"adaptative",type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1},smoothness:{type:"range",initial:0,min:0,max:1,step:.001},randomizePointsInterval:{group:"randomizePointsInterval",type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],disableInputsForValue:{false:"*"},initial:!1},pointsIntervalRandomizationFactor:{group:"randomizePointsInterval",type:"range",label:"randomizationFactor",initial:1,min:0,max:1,step:.001},pointsIntervalRandomizationSeed:{group:"randomizePointsInterval",type:"button",text:"seed",initial:!1,onClick:function(){requestAnimationFrame((()=>{r(s,{pointsInterval:!0})}))}},linkPointsIntervalRandomizationFactorToEase:{group:"randomizePointsInterval",type:"select",label:"linkToEase",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],disableInputsForValue:{false:["pointsIntervalRandomizationEase","pointsIntervalRandomizationMinFactor","pointsIntervalRandomizationMaxFactor"]},initial:!1},pointsIntervalRandomizationEase:{group:"randomizePointsInterval",label:"ease",type:"range",initial:.5,min:0,max:1,step:.001,stepValues:[.5],onUpdate:function(e){let t;return t=e=e<.5?-1*(1+(.5-e)/.5*9):1+(e-.5)/.5*9,t}},pointsIntervalRandomizationMinFactor:{group:"randomizePointsInterval",type:"range",label:"from",initial:0,min:0,max:1,step:.001},pointsIntervalRandomizationMaxFactor:{group:"randomizePointsInterval",type:"range",label:"to",initial:1,min:0,max:1,step:.001},randomizePointsHeight:{group:"randomizePointsHeight",type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],disableInputsForValue:{false:"*"},initial:!1},pointsHeightRandomizationFactor:{group:"randomizePointsHeight",type:"range",label:"randomizationFactor",initial:1,min:0,max:1,step:.001},pointsHeightRandomizationSeed:{group:"randomizePointsHeight",type:"button",text:"seed",initial:!1,onClick:function(){requestAnimationFrame((()=>{r(s,{pointsHeight:!0})}))}},linkPointsHeightRandomizationFactorToEase:{group:"randomizePointsHeight",type:"select",label:"linkToEase",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],disableInputsForValue:{false:["pointsHeightRandomizationEase","pointsHeightRandomizationMinFactor","pointsHeightRandomizationMaxFactor"]},initial:!1},pointsHeightRandomizationEase:{group:"randomizePointsHeight",label:"ease",type:"range",initial:.5,min:0,max:1,step:.001,stepValues:[.5],onUpdate:function(e){let t;return t=e=e<.5?-1*(1+(.5-e)/.5*9):1+(e-.5)/.5*9,t}},pointsHeightRandomizationMinFactor:{group:"randomizePointsHeight",type:"range",label:"from",initial:0,min:0,max:1,step:.001},pointsHeightRandomizationMaxFactor:{group:"randomizePointsHeight",type:"range",label:"to",initial:1,min:0,max:1,step:.001},circlesRotationVariationType:{group:"circlesRotationVariation",label:"type",type:"select",listOfValues:[{value:!1,text:"none",selected:!0},{value:"randomization",text:"randomization"},{value:"progression",text:"progression"}],disableInputsForValue:{false:"*",progression:["circlesRotationRandomizationSeed"]},initial:!1,onUpdate:function(e){e&&requestAnimationFrame((()=>{r(s,{circlesRotation:!0})}))}},circlesRotationVariationFactor:{group:"circlesRotationVariation",type:"range",label:"variationFactor",initial:.5,min:0,max:1,step:.001},circlesRotationRandomizationSeed:{group:"circlesRotationVariation",type:"button",text:"seed",initial:!1,onClick:function(){requestAnimationFrame((()=>{r(s,{circlesRotation:!0})}))}},strokeWidth:{group:"strokeWidth",type:"number",initial:2,max:100,min:0,step:.001,onUpdate:function(e){return s.resolution.value*e/2048}},linkStrokeWidthToEase:{group:"strokeWidth",type:"select",label:"linkToEase",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],disableInputsForValue:{false:["strokeWidthEase","strokeWidthMinFactor","strokeWidthMaxFactor"]},initial:!1},strokeWidthEase:{group:"strokeWidth",label:"ease",type:"range",initial:.5,min:0,max:1,step:.001,stepValues:[.5],onUpdate:function(e){let t;return t=e=e<.5?-1*(1+(.5-e)/.5*9):1+(e-.5)/.5*9,t}},strokeWidthMinFactor:{group:"strokeWidth",type:"range",label:"from",initial:0,min:0,max:1,step:.001},strokeWidthMaxFactor:{group:"strokeWidth",type:"range",label:"to",initial:1,min:0,max:1,step:.001},clipCircles:{type:"select",label:"type",listOfValues:[{value:"in",text:"in"},{value:"out",text:"out"},{value:!1,text:"none",selected:!0}],initial:!1,onUpdate:function(e,t){("out"===e&&"out"!==t||"out"!==e&&"out"===t)&&(s.pointsIntervalRandomizationSeed.value&&s.pointsIntervalRandomizationSeed.setValue(s.pointsIntervalRandomizationSeed.value.reverse()),s.pointsHeightRandomizationSeed.value&&s.pointsHeightRandomizationSeed.setValue(s.pointsHeightRandomizationSeed.value.reverse()),s.circlesRotationRandomizationSeed.value&&s.circlesRotationRandomizationSeed.setValue(s.circlesRotationRandomizationSeed.value.reverse()))}},alphaBackground:{type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1},downloadImage:{group:"downloadImage",type:"button",text:"download",onClick:function(){a.canvas.toBlob((e=>{let t=document.createElement("a");t.href=URL.createObjectURL(e),t.setAttribute("download",""),t.click(),URL.revokeObjectURL(t.href)}),"image/png")}}};const u=function(e){let t=[0],a="";return Array.from(e).forEach(((e,a)=>{e.toUpperCase()===e&&t.push(a)})),t.forEach(((i,n)=>{a+="<span>"+e.slice(i,t[n+1])+"</span>"})),a};let p=null,c=!1;document.addEventListener("keydown",(e=>{c||(p=e.key,c=!0)})),document.addEventListener("keyup",(()=>{p=null,c=!1}));const d=function(e,t){const a=e[t],i=a.group;if(a.hasOwnProperty("group")){const t=document.querySelectorAll("."+i+" select"),a={};t.forEach((t=>{const n=e[t.getAttribute("data-var")];if(n.hasOwnProperty("disableInputsForValue")){const e=n.value.toString();document.querySelectorAll("."+i+" [data-var]:not([data-var='"+n.paramName+"'])").forEach((t=>{let i=t.getAttribute("data-var"),o=!0;n.disableInputsForValue.hasOwnProperty(e)&&(n.disableInputsForValue[e].includes(i)||"*"===n.disableInputsForValue[e])&&(o=!1),a[i]=a.hasOwnProperty(i)?a[i]&&o:o}))}}));for(let e in a){const t=document.querySelector("[data-var='"+e+"']");if(t.disabled=!a[e],!t.parentElement.classList.contains(i)){const i=t.parentElement.querySelector("legend");i&&(a[e]?i.classList.remove("disabled"):i.classList.add("disabled"))}}}},m=function(e){const t=e.target;let a,i=t.getAttribute("data-var"),n=s[i],o=t.value;if("range"===t.type&&n.hasOwnProperty("stepValues")&&"Control"!==p){let e=10*(o+Math.abs(t.min))/(t.max+Math.abs(t.min)),a=!1,i=0;for(;i<n.stepValues.length&&!a;){let o=10*(n.stepValues[i]+Math.abs(t.min))/(t.max+Math.abs(t.min));e>o-.022&&e<o+.022&&(t.value=n.stepValues[i],n.setValue(n.stepValues[i]),a=!0),i++}a||n.setValue(o)}else n.setValue(o);d(s,i),"pointsPerCircle"===i||"adaptativePointsPerCircle"===i||("circleSpacingEase"===i||"smallestCircleScale"===i)&&s.adaptativePointsPerCircle.value?a={pointsInterval:!0,pointsHeight:!0}:"iterations"===i&&(a={pointsInterval:!0,pointsHeight:!0,circlesRotation:!0}),requestAnimationFrame((()=>{r(s,a)}))};let v=document.createElement("input");v.type="number",v.style.fontSize="1.9vh",document.documentElement.append(v);const h=v.offsetHeight;v.remove(),document.body.style.setProperty("--number-input-height",h+"px"),v.type="range",v.style.removeProperty("font-size"),document.documentElement.append(v);const g=v.offsetHeight;v.remove(),document.body.style.setProperty("--range-input-height",g+"px"),function(e){for(let t in e){let i,n,o=e[t];if(Object.assign(o,{setValue:function(t){const a=o;if(a.hasOwnProperty("type")&&"number"===a.type||"range"===a.type)isNaN(t)?t=a.initial:(a.hasOwnProperty("max")&&(t=Math.min(t,a.max)),a.hasOwnProperty("min")&&(t=Math.max(t,a.min)));else if(a.hasOwnProperty("type")&&"select"===a.type&&a.hasOwnProperty("listOfValues")){try{t=JSON.parse(t)}catch{}let e=!1,i=0,n=0;for(;!e&&n<a.listOfValues.length;)a.listOfValues[n].value===t?e=!0:(a.listOfValues[n].hasOwnProperty("selected")&&!0===a.listOfValues[n].selected&&(i=n),n++);e||(t=a.listOfValues[i].value)}if(a.inputValue=t,a.hasOwnProperty("onUpdate")){let e=a.onUpdate(t,a.value);a.value=e||t}else a.value=t;a.hasOwnProperty("influences")&&a.influences.forEach((t=>{let a=e[t];a.inputValue&&a.setValue(a.inputValue)}))}}),o.paramName=t,o.hasOwnProperty("initial")&&o.setValue(o.initial),o.hasOwnProperty("group")){let e=document.querySelector("."+o.group);if(e)i=e;else{i=document.createElement("fieldset"),i.classList.add(o.group);let e=document.createElement("legend");e.innerHTML=u(o.group),i.append(e)}}else{i=document.createElement("fieldset");let e=document.createElement("legend");e.innerHTML=u(t),i.append(e)}if("button"===o.type)n=document.createElement("button"),n.innerHTML=o.text,n.addEventListener("click",o.onClick),n.setAttribute("data-var",t);else if("select"===o.type)n=document.createElement("select"),o.listOfValues.forEach((e=>{n.innerHTML+=`<option ${e.hasOwnProperty("selected")&&e.selected?"selected":""} value="${e.value}">${e.text}</option>`})),n.addEventListener("input",m),n.setAttribute("data-var",t);else{n=document.createElement("input"),n.type=o.type,o.hasOwnProperty("step")&&(n.step=o.step),o.hasOwnProperty("min")&&(n.min=o.min),o.hasOwnProperty("max")&&(n.max=o.max),n.value=o.inputValue,n.addEventListener("input",m),n.setAttribute("data-var",t);let e=document.createElement("div");e.classList.add("input-container"),"range"===n.type?e.classList.add("range"):"number"===n.type&&e.classList.add("number"),e.append(n),n=e}if(o.hasOwnProperty("label")){let e=document.createElement("fieldset"),t=document.createElement("legend");t.innerHTML=u(o.label),e.append(t),e.append(n),n=e}i.append(n),a.paramsWindow.append(i)}for(let t in e)d(e,t)}(s),requestAnimationFrame((()=>{r(s)}));
//# sourceMappingURL=index.244cdd4e.js.map
