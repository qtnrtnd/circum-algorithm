const e=document.querySelector("canvas"),t=e.getContext("2d"),a={canvas:e,ctx:t,paramsWindow:document.getElementById("params")},i=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},n=function(e,t,a,i=0,n=!1){let l=e.x>t.x?e.x-t.x:t.x-e.x;l=0===l?1:l;let o,r,u=(e.x>t.x?e.y-t.y:t.y-e.y)/l,s=e.y-u*e.x;return n?(r=a.y+i,o=(r-s)/u):(o=a.x+i,r=u*o+s),{x:o,y:r}},l=function(e,t,a,l=params.smoothness.initial){let o,r,u={x:(e.x+t.x)/2,y:(e.y+t.y)/2},s={x:(t.x+a.x)/2,y:(t.y+a.y)/2},c={x:(u.x+s.x)/2,y:(u.y+s.y)/2},p=i(u,c),m=i(c,s),h=Math.max(u.x,c.x)-Math.min(u.x,c.x)>=Math.max(u.y,c.y)-Math.min(u.y,c.y),d=Math.max(s.x,c.x)-Math.min(s.x,c.x)>=Math.max(s.y,c.y)-Math.min(s.y,c.y);return o=h?u.x<c.x?1:-1:u.y<c.y?1:-1,r=d?s.x>c.x?1:-1:s.y>c.y?1:-1,{cpl:n(u,s,c,-o*p*.552*l,!h),cpr:n(u,s,c,r*m*.552*l,!d),x:c.x,y:c.y}},o=function(e,t={pointsInterval:!1,pointsHeight:!1,circlesRotation:!1}){a.ctx.clearRect(0,0,e.resolution.value,e.resolution.value),a.ctx.lineWidth=e.strokeWidth.value,e.alphaBackground.value||(a.ctx.fillStyle="white",a.ctx.fillRect(0,0,a.canvas.width,a.canvas.height));const i=function(e){let t=e.iterations.value,a=1/Math.max(t-1,1),i=[];for(let n=0;n<t;n++){let t;t=e.tension.value<0?1-Math.pow(1-n*a,-1*e.tension.value):Math.pow(n*a,e.tension.value),i.push(Math.round(1e3*(e.smallestCircleScale.value+t*(e.biggestCircleScale.value-e.smallestCircleScale.value)))/2e3)}return i}(e),n=function(e,t){let a=[];const i=e.biggestCircleScale.value/2,n=e.pointsPerCircle.value;for(let l=0;l<t.length;l++){let o;o=e.adaptativePointsPerCircle.value?Math.floor(e.pointsPerCircle.min+t[l]/i*(n-e.pointsPerCircle.min)):n,a.push(o)}return a}(e,i);if(t.pointsInterval||e.randomizePointsInterval.value&&!e.pointsIntervalRandomizationSeed.value){let t=[];for(let a=0;a<e.iterations.value;a++)t.push(Array.apply(null,Array(n[a])).map((()=>2*Math.random()-1)));e.pointsIntervalRandomizationSeed.value=t}if(t.pointsHeight||e.randomizePointsHeight.value&&!e.pointsHeightRandomizationSeed.value){let t=[];for(let a=0;a<e.iterations.value;a++)t.push(Array.apply(null,Array(n[a])).map((()=>2*Math.random()-1)));e.pointsHeightRandomizationSeed.value=t}if(t.circlesRotation||e.circlesRotationVariationType.value&&!e.circlesRotationVariationSeed.value){let t=[];if("randomization"===e.circlesRotationVariationType.value)for(let a=0;a<e.iterations.value;a++)t.push(Math.random());else if("progression"===e.circlesRotationVariationType.value)for(let a=0;a<e.iterations.value;a++)t.push(Math.round(a/(e.iterations.value-1)*1e3)/1e3);e.circlesRotationVariationSeed.value=t}i.forEach(((t,i)=>{let o=function(e,t,i,n,o,r){r.adaptativePointsPerCircle.value&&t!==i.length&&(t=i.length);let u=360/t,s=(r.biggestCircleScale.value/2-e)*r.distanceFromCenter.value,c=a.canvas.width/2+s*Math.cos(r.originRotate.value*Math.PI/180),p=a.canvas.height/2+s*Math.sin(r.originRotate.value*Math.PI/180),m=[],h=[];for(let a=0;a<t;a++){let t=(r.randomizePointsInterval.value?u/2*(i?i[a]:0)*r.pointsIntervalRandomizationFactor.value:0)+(r.circlesRotationVariationType.value?360*(o||0)*r.circlesRotationVariationFactor.value:0),l=r.randomizePointsHeight.value?(n?n[a]:0)*e*r.pointsIHeightRandomizationFactor.value:0,s=c+(e+l)*Math.cos((a*u+t)*Math.PI/180),h=p+(e+l)*Math.sin((a*u+t)*Math.PI/180);m.push({x:s,y:h,angle:a*u})}return m.forEach(((e,t)=>{let a=t>0?m[t-1]:m[m.length-1],i=t<m.length-1?m[t+1]:m[0];h.push(l(a,e,i,r.smoothness.value))})),h}(t,n[i],e.pointsIntervalRandomizationSeed.value[i],e.pointsHeightRandomizationSeed.value[i],e.circlesRotationVariationSeed.value[i],e);a.ctx.beginPath(),o.forEach(((t,i)=>{if(0===i&&a.ctx.moveTo(t.x,t.y),0===e.smoothness.value)a.ctx.lineTo(t.x,t.y);else if(i>0){let e=o[i-1].cpr,n=t.cpl;a.ctx.bezierCurveTo(e.x,e.y,n.x,n.y,t.x,t.y)}})),e.smoothness.value>0?a.ctx.bezierCurveTo(o[o.length-1].cpr.x,o[o.length-1].cpr.y,o[0].cpl.x,o[0].cpl.y,o[0].x,o[0].y):a.ctx.closePath(),a.ctx.stroke(),o.forEach(((e,t)=>{"red"===e.color&&(a.ctx.beginPath(),a.ctx.fillStyle=e.color,a.ctx.arc(e.x,e.y,2,0,180),a.ctx.fill(),a.ctx.beginPath(),a.ctx.fillStyle="blue",a.ctx.arc(e.cpl.x,e.cpl.y,2,0,180),a.ctx.fill(),a.ctx.beginPath(),a.ctx.fillStyle="blue",a.ctx.arc(e.cpr.x,e.cpr.y,2,0,180),a.ctx.fill(),a.ctx.beginPath(),a.ctx.moveTo(e.cpl.x,e.cpl.y),a.ctx.lineTo(e.cpr.x,e.cpr.y),a.ctx.stroke())}))}))};let r;const u=function(e){let t=r[e];t.inputValue&&(t.value=t.inputValue)};r={resolution:{group:"downloadImage",label:"resolution",type:"number",initial:window.innerHeight,min:1,max:6e3,get value(){return this.computedValue},set value(e){let t=Math.max(Math.min(e,this.max),this.min);this.computedValue=this.inputValue=a.canvas.width=a.canvas.height=t,u("biggestCircleScale"),u("strokeWidth")}},biggestCircleScale:{type:"range",initial:.85,min:0,max:4,step:.01,get value(){return this.computedValue},set value(e){let t=this.inputValue=Math.max(Math.min(e,this.max),this.min);this.computedValue=t*r.resolution.value,u("smallestCircleScale")}},smallestCircleScale:{type:"range",initial:.4,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){let t=this.inputValue=Math.max(Math.min(e,this.max),this.min);this.computedValue=t*r.biggestCircleScale.value}},originRotate:{group:"origin",type:"range",label:"rotate",initial:60,min:0,max:360,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},distanceFromCenter:{group:"origin",type:"range",label:"distanceFromCenter",initial:1,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},iterations:{type:"number",initial:20,min:1,step:1,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(e,this.min)}},tension:{type:"range",initial:.5,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){let t=Math.max(Math.min(e,this.max),this.min);this.inputValue=t,t=t<.5?-1*(1+(.5-t)/.5*4):1+(t-.5)/.5*4,this.computedValue=t}},pointsPerCircle:{group:"pointsPerCircle",type:"number",initial:20,min:4,step:1,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(e,this.min)}},adaptativePointsPerCircle:{group:"pointsPerCircle",label:"adaptative",type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1,get value(){return this.computedValue},set value(e){let t;try{t=JSON.parse(e)}catch{t=e}this.computedValue=this.inputValue=t}},smoothness:{type:"range",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},randomizePointsInterval:{group:"randomizePointsInterval",type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1,get value(){return this.computedValue},set value(e){let t;try{t=JSON.parse(e)}catch{t=e}this.computedValue=this.inputValue=t}},pointsIntervalRandomizationFactor:{group:"randomizePointsInterval",type:"range",label:"randomizationFactor",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},pointsIntervalRandomizationSeed:{group:"randomizePointsInterval",type:"button",text:"seed",initial:!1,get value(){return this.computedValue},set value(e){this.computedValue=e},onClick:function(){requestAnimationFrame((()=>{o(r,{pointsInterval:!0})}))}},randomizePointsHeight:{group:"randomizePointsHeight",type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1,get value(){return this.computedValue},set value(e){let t;try{t=JSON.parse(e)}catch{t=e}this.computedValue=this.inputValue=t}},pointsIHeightRandomizationFactor:{group:"randomizePointsHeight",type:"range",label:"randomizationFactor",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},pointsHeightRandomizationSeed:{group:"randomizePointsHeight",type:"button",text:"seed",initial:!1,get value(){return this.computedValue},set value(e){this.computedValue=e},onClick:function(){requestAnimationFrame((()=>{o(r,{pointsHeight:!0})}))}},circlesRotationVariationType:{group:"circlesRotationVariation",label:"type",type:"select",listOfValues:[{value:!1,text:"none",selected:!0},{value:"randomization",text:"randomization"},{value:"progression",text:"progression"}],initial:!1,get value(){return this.computedValue},set value(e){let t;try{t=JSON.parse(e)}catch{t=e}this.computedValue=this.inputValue=t,t&&requestAnimationFrame((()=>{o(r,{circlesRotation:!0})}))}},circlesRotationVariationFactor:{group:"circlesRotationVariation",type:"range",label:"variationFactor",initial:0,min:0,max:1,step:.01,get value(){return this.computedValue},set value(e){this.computedValue=this.inputValue=Math.max(Math.min(e,this.max),this.min)}},circlesRotationVariationSeed:{group:"circlesRotationVariation",type:"button",text:"seed",initial:!1,get value(){return this.computedValue},set value(e){this.computedValue=e},onClick:function(){requestAnimationFrame((()=>{o(r,{circlesRotation:!0})}))}},strokeWidth:{type:"number",initial:2,max:100,min:0,step:.01,get value(){return this.computedValue},set value(e){let t=this.inputValue=Math.max(Math.min(e,this.max),this.min);this.computedValue=r.resolution.value*t/2048}},alphaBackground:{type:"select",listOfValues:[{value:!0,text:"true"},{value:!1,text:"false",selected:!0}],initial:!1,get value(){return this.computedValue},set value(e){let t;try{t=JSON.parse(e)}catch{t=e}this.computedValue=this.inputValue=t}},downloadImage:{group:"downloadImage",type:"button",text:"download",onClick:function(){a.canvas.toBlob((e=>{let t=document.createElement("a");t.href=URL.createObjectURL(e),t.setAttribute("download",""),t.click(),URL.revokeObjectURL(t.href)}),"image/png")}}};const s=function(e){let t=[0],a="";return Array.from(e).forEach(((e,a)=>{e.toUpperCase()===e&&t.push(a)})),t.forEach(((i,n)=>{a+="<span>"+e.slice(i,t[n+1])+"</span>"})),a},c=function(e){let t=e.target.getAttribute("data-var"),a=e.target.value;r[t].value=a,requestAnimationFrame((()=>{let e;"pointsPerCircle"===t||"adaptativePointsPerCircle"===t||("tension"===t||"smallestCircleScale"===t)&&r.adaptativePointsPerCircle.value?e={pointsInterval:!0,pointsHeight:!0}:"iterations"===t&&(e={pointsInterval:!0,pointsHeight:!0,circlesRotation:!0}),o(r,e)}))};!function(e){for(let t in e){let i,n,l=e[t];if(l.hasOwnProperty("initial")&&(l.value=l.initial),l.hasOwnProperty("group")){let e=document.querySelector("."+l.group);if(e)i=e;else{i=document.createElement("fieldset"),i.classList.add(l.group);let e=document.createElement("legend");e.innerHTML=s(l.group),i.append(e)}}else{i=document.createElement("fieldset");let e=document.createElement("legend");e.innerHTML=s(t),i.append(e)}if("button"===l.type?(n=document.createElement("button"),n.innerHTML=l.text,n.addEventListener("click",l.onClick)):"select"===l.type?(n=document.createElement("select"),l.listOfValues.forEach((e=>{n.innerHTML+=`<option ${e.hasOwnProperty("selected")&&e.selected?"selected":""} value="${e.value}">${e.text}</option>`})),n.addEventListener("input",c),n.setAttribute("data-var",t)):(n=document.createElement("input"),n.type=l.type,l.hasOwnProperty("step")&&(n.step=l.step),l.hasOwnProperty("min")&&(n.min=l.min),l.hasOwnProperty("max")&&(n.max=l.max),n.value=l.inputValue,n.addEventListener("input",c),n.setAttribute("data-var",t)),l.hasOwnProperty("label")){let e=document.createElement("fieldset"),t=document.createElement("legend");t.innerHTML=s(l.label),e.append(t),e.append(n),n=e}i.append(n),a.paramsWindow.append(i)}}(r),requestAnimationFrame((()=>{o(r)}));
//# sourceMappingURL=index.ed8e6332.js.map
